<!DOCTYPE html>
<html lang="en">
        <head>
                <meta charset="UTF-8" />
                <meta http-equiv="X-UA-Compatible" content="IE=edge" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <link rel="icon" href="../assets/favicon.ico" type="image/x-icon" />
                <title>Demo</title>
        </head>
        <body>
                <header>
                        <h1>Demo</h1>
                        <span> Here is some screenshots from 6 October 2024. </span>
                        <nav>
                                <a href="/"> Boilerplate </a>
                                <a href="/about.html">About</a>
                                <a href="/syntax.html"> Syntax </a>
                                <a href="/demo.html" class="routedTo"> Demo </a>
                        </nav>
                </header>

                <section>
                        <h2>Index Product</h2>
                        <p>
                                Welcome to the <strong>index</strong> page, where you can find a table of records featuring smart pagination for seamless
                                navigation.
                        </p>

                        <img src="../assets//8-6-24/index-product.png" alt="Index Product" />

                        <h3>API</h3>
                        <p>Also, checkout the JSON api working too. We can change the params too, altering the response.</p>

                        <div class="scroll-box">
                                <pre>
curl -X GET 'http://localhost:8080/api/product?page=2&limit=4'
[
    { "id": 78, "title": "Smartphone", "price": 699.99 },
    { "id": 79, "title": "Laptop", "price": 999.99 },
    { "id": 80, "title": "Fiction Book", "price": 19.99 },
    { "id": 81, "title": "T-Shirt", "price": 15.99 }
]
                        </pre
                                >
                        </div>

                        <h2>Record Creation & Field Validation</h2>
                        <p>
                                Both the <strong>new</strong> and <strong>edit</strong> pages incorporate validation to prevent invalid submissions, ensuring a
                                smooth user experience.
                        </p>
                        <img src="../assets//8-6-24/new-product.png" alt="New Product" />

                        <p>
                                Validation is determined by the input given, so using things like <code>!</code> or <code>0.00..99.99</code> will impact the
                                database, server, and forms.
                        </p>
                        <img src="../assets//8-6-24/new-product-invalid-field.png" alt="New Product Invalid Field" />

                        <h3>API</h3>
                        <p>
                                We are able to create records here too. Currently if error the api responds with the HTML edit page, so I will want to tweak
                                that. Also on success it is no content, I will want to respond with the new record identifier. All in good time.
                        </p>
                        <div class="scroll-box">
                                <pre>
curl -X POST "http://localhost:8080/api/product" -H "Content-Type: application/json" -d '{"title": "Small Backpack", "price": 21.57}'

curl -X GET 'http://localhost:8080/api/product/115'
{ "id": 115, "title": "Small Backpack", "price": 21.57 }
                        </pre
                                >
                        </div>
                        <h2>Changeset Superpowers</h2>
                        <p>
                                Our <strong>changesets</strong> help track errors during record creation or modification. They also retain the entered fields
                                post-submission, so users don't lose progress if an issue arises - like trying to create a "Candy Bar" that already exists. The
                                changeset is also where we can catch validation issues, like a title being too long. Since the form is setup 1:1 with what the
                                server expects, that is less likely to happen. However this is useful when looking at it from an api perspective, e.g. the JSON
                                endpoints.
                        </p>

                        <img src="../assets//8-6-24/new-changeset-error.png" alt="New Changeset Error" />

                        <h3>API</h3>
                        <p>The api will reject bad inputs as well. Better error messages todo.</p>
                        <div class="scroll-box">
                                <pre>

# Note we already created a "Small Backpack"
curl -X POST "http://localhost:8080/api/product" -H "Content-Type: application/json" -d '{"title": "Small Backpack", "price": 21.57}'        
Error creating

curl -X POST "http://localhost:8080/api/product" -H "Content-Type: application/json" -d '{"title": "Small Backpack 2000", "price": 21.57}'        

curl -X GET 'http://localhost:8080/api/product/117'
{"id":117,"title":"Small Backpack 2000","price":21.57}
</pre
                                >
                        </div>

                        <h2>Show Record</h2>
                        <p>Here's the <strong>show</strong> page, where you can view detailed information about the product just created.</p>

                        <img src="../assets//8-6-24/show-product.png" alt="Show Product" />

                        <h3>API</h3>
                        <p>As seen in other examples, viewing a records is accessible via the api.</p>
                        <div class="scroll-box">
                                <pre>
curl -X GET 'http://localhost:8080/api/product/115'

{ "id": 115, "title": "Small Backpack", "price": 19.23 }                                
                        </pre
                                >
                        </div>
                        <h2>Edit Record</h2>
                        <p>
                                The <strong>edit</strong> page offers a familiar form layout, with additional fields displayed as read-only (such as the ID),
                                ensuring clarity on what can be modified.
                        </p>

                        <img src="../assets//8-6-24/edit-product.png" alt="Edit Product" />

                        <h3>API</h3>
                        <p>Records can be updated via the api too.</p>
                        <div class="scroll-box">
                                <pre>
                                
curl -X PUT "http://localhost:8080/api/product/115" -H "Content-Type: application/json" -d '{"title": "Small Backpack", "price": 19.31}'

... Looks like this one failed, todo fix
                        </pre
                                >
                        </div>
                        <h2>Delete Confirmation</h2>
                        <p>Lastly, note the delete dialog on the <strong>edit</strong> page, which prompts for confirmation before removing a record.</p>

                        <img src="../assets//8-6-24/edit-delete-product.png" alt="Edit Delete Product" />

                        <h3>API</h3>
                        <p>Yup, deleting works.</p>
                        <div class="scroll-box">
                                <pre>
curl -X DELETE "http://localhost:8080/api/product/115"

curl -X GET 'http://localhost:8080/api/product/115'
Error reading: sql: no rows in result set                                
                        </pre
                                >
                        </div>
                </section>
        </body>
</html>
